<!DOCTYPE xhtml>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <title>Filtered Chat Settings Builder</title>
  <meta charset="utf-8" />
  <link href="assets/main.css" rel="stylesheet" type="text/css" />
  <style type="text/css">
#debug {
  border: 8px inset lightgray;
  font-weight: normal;
}
  </style>
  <script type="text/javascript" src="assets/jquery-3.4.0.js"></script>
  <script type="text/javascript">

$(document).on("builder-loaded", function(e) {
  onBuilderLoaded();
  console.log("Builder loaded");
});

function debug(text, escape) {
  var msg = text;
  if (typeof(escape) === "undefined") escape = true;
  if (escape) {
    msg = text.replace(/&/g, "&amp;")
      .replace(/</g, "&lt;")
      .replace(/>/g, "&gt;")
      .replace(/"/g, "&quot;")
      .replace(/'/g, "&apos;");
  }
  var content = $("#debug").html();
  if (content) {
    content = content + "<br />" + msg;
  } else {
    content = msg;
  }
  $("#debug").show().html(content);
  try {
    console.log(msg);
  } catch (e) { }
}

function addEntry(text) {
  $(".content").append($("<pre></pre>").text(text));
}

(function injectAssets() {
  var IS_TESLA = Boolean(navigator.userAgent.match(/\bTesla\b/));
  var ASK_DIST = Boolean(window.location.search.match(/\busedist\b/));
  var USE_DIST = ASK_DIST || IS_TESLA;
  function injectAsset(src) {
    var d = document.createElement("script");
    d.setAttribute("type", "text/javascript");
    d.setAttribute("src", src);
    document.head.appendChild(d);
  }
  injectAsset("twitch-api/" + (USE_DIST ? "dist/" : "") + "utility.js");
  injectAsset((USE_DIST ? "dist/" : "") + "settings-builder.js");
})();
  </script>
</head>
<body>
<span class="debug" id="debug" style="display: none"></span>
<div class="content">
<!--
IDEAS:

Selection box for saved configurations
  Load Config
  Save Config <input type="text" /> (for name)

Global settings:
  Channels
  Username
  OAuth
  BG CSS
  Scrollbars
  Transparent
  Enable Clips
  Disable Mod Overrides
  Debug Level

Layout:
  Radio buttons for "single", "double"
  Radio buttons for "chat", "no chat", "slim"
  Auto-updates module configuration section

One or two columns based on layout choice:
  Name
  Flags
    Pleb, Sub, VIP, Mod, Event, Bits, /me
  Include User
  Include Keyword
  Exclude User
  Exclude Starts With
  Limit to Channel

Live-updated URL at the bottom
  Checkbox for base64?
-->
</div>
</body>
</html> 
